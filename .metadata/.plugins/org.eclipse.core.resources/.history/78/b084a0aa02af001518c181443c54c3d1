<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	<mapper namespace="com.lyceum.dao.mybatis.mappers.StudentMapper">
	
	<!-- RESULTMAPS -->
	
		<resultMap id="getStudentResultMap">
		
		</resultMap>
	
	<!-- END RESULTMAPS -->
	
	<!-- INSERT QUERIES -->
	
		<insert id="insertStudent">
			INSERT INTO tblStudent (strStudentCode, skPersonFK, skAccountFK)
			VALUES (#{strStudentCode},#{skPerson},
					(SELECT skAccount FROM tblAccount WHERE strUsername=#{account.strUsername} LIMIT 1)
			)
		</insert>
	
		<insert id="insertAccount">
			INSERT INTO tblAccount (strUsername, strPassword, skAccountTypeFK)
			VALUES (#{account.strUsername}, MD5(#{account.strPassword}),
					(SELECT skAccountType FROM tblAccountType WHERE strAccountDesc='Student')
					)
		</insert>
	
	<!-- END INSERT QUERIES -->
	
	</mapper>
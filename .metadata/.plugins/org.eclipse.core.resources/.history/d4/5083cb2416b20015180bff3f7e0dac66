package com.lyceum.business.impl;

import com.lyceum.business.StudentBusiness;
import com.lyceum.conversion.SmartCounter;
import com.lyceum.dao.StudentRepository;
import com.lyceum.model.Student;

public class StudentBusinessImpl implements StudentBusiness{

	private StudentRepository studentRepository;
	
	public void setStudentRepository(StudentRepository studentRepository){
		this.studentRepository = studentRepository;
	}
	
	@Override
	public String getStudentCode() {
		// TODO Auto-generated method stub
		String strStudentCode = studentRepository.getLastStudentCode();
		if (strStudentCode == null){
			return "00001";
		}
		return SmartCounter.newCode(strStudentCode);
	}

	@Override
	public String registerStudent(Student student) {
		// TODO Auto-generated method stub
		try{
			
			if (student.getAccount() == null || student.getAccount().equals("")){
				throw new IllegalArgumentException();
			}
			if (student.getBirthday() == null){
				throw new IllegalArgumentException();
			}
			if (student.getStrAddress() == null || student.getStrAddress().equals("")){
				throw new IllegalArgumentException();
			}
			if (student.getStrContactNo() == null || student.getStrContactNo().equals("")){
				throw new IllegalArgumentException();
			}
			
		}catch(IllegalArgumentException e){
			e.printStackTrace();
		}
		return "errorInValidation";
	}

}
